!function t(i,e,a){function n(r,h){if(!e[r]){if(!i[r]){var o="function"==typeof require&&require;if(!h&&o)return o(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[r]={exports:{}};i[r][0].call(l.exports,function(t){var e=i[r][1][t];return n(e?e:t)},l,l.exports,t,i,e,a)}return e[r].exports}for(var s="function"==typeof require&&require,r=0;r<a.length;r++)n(a[r]);return n}({1:[function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),s=t("./ParticlesPainting.js"),r=function(){function t(i){a(this,t),this.loop=this.loop.bind(this),this.resize=this.resize.bind(this),this.time={},this.time.start=+new Date,this.time.current=this.time.start,this.time.inactive=0,this.time.active=0,this.time.offset=0,this.setParticlesPainting(),this.handleTabActive(),this.handleResize(),this.handleDragAndDrop(),this.setStats(),this.setTweaker(),this.loop()}return n(t,[{key:"setParticlesPainting",value:function(){var t=this;this.particlesPainting=new s({canvas:document.querySelector(".particles")}),this.particlesPainting.canvas.addEventListener("click",function(i){i.preventDefault(),t.particlesPainting.startRandom()})}},{key:"handleDragAndDrop",value:function(){var t=this,i=document.querySelector(".container");i.addEventListener("dragover",function(t){t.stopPropagation(),t.preventDefault()}),i.addEventListener("dragleave",function(t){i.classList.remove("draging")}),i.addEventListener("dragenter",function(t){t.stopPropagation(),t.preventDefault(),i.classList.add("draging")}),i.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),i.classList.remove("draging");var a=e.dataTransfer.files;if(a.length){var n=a[0];if(n.type.match(/image.*/)){var s=new FileReader;s.onload=function(i){var e=document.createElement("img");e.src=i.target.result,t.particlesPainting.image.setImage(e)},s.readAsDataURL(n)}}})}},{key:"handleTabActive",value:function(){var t=this;this.tabActive=!0,window.addEventListener("focus",function(){t.tabActive=!0}),window.addEventListener("blur",function(){t.tabActive=!1})}},{key:"loop",value:function(){window.requestAnimationFrame(this.loop);var t=+new Date;this.time.offset=t-this.time.current,this.time.current=t,this.tabActive?this.time.active+=this.time.offset:this.time.inactive+=this.time.offset,this.tabActive&&(this.stats("frame").end(),this.stats("FPS").frame(),this.particlesPainting.update(this.time),this.stats("frame").start(),this.stats().update())}},{key:"handleResize",value:function(){window.addEventListener("resize",this.resize),this.resize()}},{key:"resize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.particlesPainting.resize(this.width,this.height)}},{key:"setStats",value:function(){this.stats=new rStats({CSSPath:"sources/vendors/rstats/"})}},{key:"setTweaker",value:function(){var t=this;this.tweaker=new dat.GUI,this.tweaker.add(this.particlesPainting,"drawImage").name("draw image").onFinishChange(function(){t.particlesPainting.reset()}),this.tweaker.add(this.particlesPainting,"attenuation").min(0).max(.1).step(.01).name("attenuation").onFinishChange(function(){t.particlesPainting.reset()}),this.tweaker.add(this.particlesPainting,"density").min(0).max(.1).step(.001).name("density").onFinishChange(function(){t.particlesPainting.reset()}),this.tweaker.add(this.particlesPainting,"maxSpeed").min(0).max(.1).step(.001).name("max speed").onFinishChange(function(){t.particlesPainting.reset()}),this.tweaker.add(this.particlesPainting,"rotationSpeed").min(0).max(.1).step(.001).name("rotation speed").onFinishChange(function(){t.particlesPainting.reset()}),this.tweaker.add(this.particlesPainting,"rotationChangeChances").min(0).max(1).step(.001).name("rotation changes").onFinishChange(function(){t.particlesPainting.reset()}),this.tweaker.add(this.particlesPainting,"radius").min(0).max(20).step(1).name("radius").onFinishChange(function(){t.particlesPainting.reset()}),this.tweaker.add(this.particlesPainting,"reset").name("reset"),this.tweaker.add(this.particlesPainting,"startRandom").name("reset random")}}]),t}();i.exports=r},{"./ParticlesPainting.js":4}],2:[function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),s=function(){function t(i){a(this,t),this.canvas=i.canvas,this.context=i.context,this.x=i.x,this.y=i.y,this.speed=i.speed,this.rotationSpeed=i.rotationSpeed,this.rotationChangeChances=i.rotationChangeChances,this.rotationDirection=1,this.orientation=i.orientation,this.color=i.color,this.radius=i.radius,this.fillStyle="rgb("+this.color.r+", "+this.color.g+", "+this.color.b+")"}return n(t,[{key:"update",value:function(t){this.rotationDirection*=Math.random()<this.rotationChangeChances?-1:1,this.orientation+=this.rotationDirection*t.offset*this.rotationSpeed,this.x+=Math.sin(this.orientation)*this.speed*t.offset,this.y+=Math.cos(this.orientation)*this.speed*t.offset,this.context.fillStyle=this.fillStyle,this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI),this.context.fill()}}]),t}();i.exports=s},{}],3:[function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),s=function(){function t(i){a(this,t),this.canvas=i.canvas,this.context=i.context,this.loadedCallback=i.loadedCallback,this.loaded=!1,this.image=null,this.qualityRatio=.1,this.ratio=1,this.padding=50,i.src&&this.load(i.src)}return n(t,[{key:"load",value:function(t){var i=this;this.loaded=!1;var e=new Image;e.addEventListener("load",function(){i.loaded=!0,i.setImage(e)}),e.src=t}},{key:"setImage",value:function(t){this.image=t,this.setCoordinates(),this.setImageData(),this.getColorAtPoint(200,4),this.loadedCallback.apply(this)}},{key:"getColorAtPoint",value:function(t,i){if(!this.loaded)return{r:0,g:0,b:0,a:1};t=Math.floor(t*this.qualityRatio*this.ratio),i=Math.floor(i*this.qualityRatio*this.ratio);var e=4*Math.floor(this.imageData.width*i+t),a=this.imageData.data[e],n=this.imageData.data[e+1],s=this.imageData.data[e+2],r=this.imageData.data[e+3];return{r:a,g:n,b:s,a:r}}},{key:"setCoordinates",value:function(){var t=this.image.width/(this.canvas.width-2*this.padding),i=this.image.height/(this.canvas.height-2*this.padding);this.ratio=1,(t>1||i>1)&&(this.ratio=t>i?t:i),this.width=this.image.width/this.ratio,this.height=this.image.height/this.ratio,this.x=Math.round(.5*this.canvas.width-.5*this.width),this.y=Math.round(.5*this.canvas.height-.5*this.height)}},{key:"setImageData",value:function(){var t=0,i=0,e=this.width*this.ratio*this.qualityRatio,a=this.height*this.ratio*this.qualityRatio,n=this.context.getImageData(t,i,e,a);this.context.drawImage(this.image,t,i,e,a);var s=this.context.getImageData(t,i,e,a);this.context.putImageData(n,t,i),this.imageData=s}},{key:"draw",value:function(){this.context.drawImage(this.image,this.x,this.y,this.width,this.height)}}]),t}();i.exports=s},{}],4:[function(t,i,e){"use strict";function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),s=t("./ParticlesImage.js"),r=t("./Particle.js"),h=function(){function t(i){var e=this;a(this,t),this.width=window.innerWidth,this.height=window.innerHeight,this.tweaker=i.tweaker,this.canvas=i.canvas,this.context=this.canvas.getContext("2d"),this.particles=[],this.drawImage=!0,this.attenuation=0,this.density=.01,this.maxSpeed=.015,this.rotationSpeed=.01,this.rotationChangeChances=.1,this.radius=2,this.image=new s({canvas:this.canvas,context:this.context,loadedCallback:function(){e.clear(),e.drawImage&&e.image.draw(),e.setParticles()}}),this.startRandom()}return n(t,[{key:"reset",value:function(){this.image.image&&this.image.load(this.image.image.src)}},{key:"startRandom",value:function(){var t=Math.floor(7*Math.random()),i="sources/images/image-"+t+".jpg";this.image.load(i)}},{key:"resize",value:function(t,i){this.width=t,this.height=i,this.canvas.width=this.width,this.canvas.height=this.height,this.clear(),this.reset()}},{key:"setParticles",value:function(){this.particles=[];for(var t=this.image.width*this.image.height,i=t*this.density,e=0;e<i;e++){var a=Math.ceil(this.image.width*Math.random()),n=Math.ceil(this.image.height*Math.random()),s=new r({canvas:this.canvas,context:this.context,x:this.image.x+a,y:this.image.y+n,speed:this.maxSpeed*Math.random(),rotationSpeed:this.rotationSpeed,rotationChangeChances:this.rotationChangeChances,radius:this.radius,orientation:2*Math.PI*Math.random(),color:this.image.getColorAtPoint(a,n)});this.particles.push(s)}}},{key:"clear",value:function(){this.context.fillStyle="rgba(0, 0, 0, 1)",this.context.fillRect(0,0,this.width,this.height)}},{key:"update",value:function(t){this.attenuation&&(this.context.fillStyle="rgba(0, 0, 0, "+this.attenuation+")",this.context.fillRect(0,0,this.width,this.height));var i=!0,e=!1,a=void 0;try{for(var n,s=this.particles[Symbol.iterator]();!(i=(n=s.next()).done);i=!0){var r=n.value;r.update(t)}}catch(t){e=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(e)throw a}}}}]),t}();i.exports=h},{"./Particle.js":2,"./ParticlesImage.js":3}],5:[function(t,i,e){"use strict";var a=t("./Application.js");new a},{"./Application.js":1}]},{},[5]);
//# sourceMappingURL=maps/bundle.js.map
